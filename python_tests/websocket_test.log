2025-07-09 11:01:59,343 - INFO - === WebSocket Notification Test ===
2025-07-09 11:01:59,357 - INFO - This test will:
2025-07-09 11:01:59,360 - INFO - 1. Connect to SignalR hub via WebSocket
2025-07-09 11:01:59,361 - INFO - 2. Send notifications via REST API
2025-07-09 11:01:59,367 - INFO - 3. Verify messages are received via WebSocket
2025-07-09 11:01:59,455 - INFO - Connecting to SignalR hub: wss://test.scorptech.co/hubs/notifications?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1laWQiOiIyYzhlZjE0Yi04MDM4LTQ4NDEtOGE0MS0xMzEyMzZjNTUwODIiLCJ1bmlxdWVfbmFtZSI6ImpvaG5kb2UiLCJnaXZlbl9uYW1lIjoiSm9obiIsImZhbWlseV9uYW1lIjoiRG9lIiwicm9sZSI6ImF1ZGl0b3IiLCJlbWFpbCI6ImpvaG5kb2VAZXhhbXBsZS5jb20iLCJvcmdhbmlzYXRpb25faWQiOiI4NWU3NDMzNi04M2MwLTQ3MWEtYWM5ZC1lOWQwOWQ3MjU2ZTQiLCJuYmYiOjE3NTIwMzY3NDEsImV4cCI6MTc1MjA2NTU0MSwiaWF0IjoxNzUyMDM2NzQxLCJpc3MiOiJBdWRpdFN5c3RlbSIsImF1ZCI6IkF1ZGl0U3lzdGVtQ2xpZW50cyJ9.cXq6JMS2CMdmUo78XBblXuCa0plL4eb0PY7LuV6Zk50
2025-07-09 11:02:02,476 - ERROR - WebSocket not connected, cannot send notifications
2025-07-09 11:02:03,884 - INFO - WebSocket connection established successfully
2025-07-09 11:02:03,899 - INFO - Sending handshake: {"protocol": "json", "version": 1}
2025-07-09 11:02:03,911 - INFO - Handshake sent successfully
2025-07-09 11:02:03,916 - INFO - Starting to listen for messages...
2025-07-09 11:02:18,859 - INFO - === MESSAGE #1 ===
2025-07-09 11:02:18,859 - INFO - Raw message: {"error":"Handshake was canceled."}
2025-07-09 11:02:18,860 - INFO - Message is not valid JSON
2025-07-09 11:02:18,860 - INFO - === END MESSAGE #1 ===

2025-07-09 11:02:19,304 - ERROR - WebSocket connection closed
2025-07-09 11:02:19,305 - INFO - === Test Complete ===
2025-07-09 11:02:19,306 - INFO - Check websocket_test.log for detailed logs
